#Database System 1
##数据库定义
数据库管理系统提供数据库语言DDL,DCL,DML给用户  
关系模式（表名 表标题 表内容）  
表/关系
列名/字段/属性
行/元组/元素  
**数据库结构**  
外模式/子模式  
概念模式/全局模式  
内模式/存储模式  
**关系模型**  
基本结构  
基本操作  
完整性约束（实体，参照，自定义）  
候选码->主码 主属性 外码  
**关系代数**  
并 差 积 选择 投影 连接  
##SQL语言
数据库完整性：完整性规则，静态约束（列约束，表约束），动态约束（触发器）  
完整性约束规则OPAR  
数据库安全性：强制安全性，自主安全性（存储矩阵，视图） 授权 安全性规则：SOTP  
**嵌入式SQL语言**  
交互式SQL 非过程性 难做复杂查询  
嵌入式SQL：exec sql into ":程序变量"  
**动态SQL**  
立即执行：exec sql execute immediate :host  
编译动态参数：exec sql prepare sql_temp from :host   exec sql execute sql_temp using :con  
数据字典/目录 存储数据库各类对象定义信息的表  
ODBC/JDBC java.sql driver driverManagement Connection  
##数据建模  
现实世界->信息世界（概念模型）->数据世界（逻辑层，物理层）  
实体与实体之间的联系 联系基数 建模：chen方法 理解，区分，命名，表达 E-R模型  
**工程化方法IDEF1X**  
实体：独立实体，从属实体（唯一标识依赖于与其他实体的联系）相交实体  
联系：标定联系，非标定联系，分类联系，非确定联系  
**数据库设计**  
需求分析-概念数据库设计-逻辑-物理  
实体的发现，分析与定义->实体属性->实体联系->外部视图与概念视图  
不同层次E-R图：实体级图，键级图，完整图  
逻辑数据库设计：数据依赖，关系范式，模式分解  
物理数据库设计：DBMS选型，数据结构，存储方式，访问控制规则，索引  
**函数依赖**  
完全，部分函数依赖 函数依赖传递  
被F逻辑蕴含的所有函数依赖的集合被称为F的闭包F+ 包含了平凡的函数依赖  
函数依赖的Amstrong公理：传递律，自反律，增广律 最小覆盖  
**关系模式范式**  
1NF 关系中每个分量不可分，不能是复合属性，多值属性及其组合  
2NF 每一非主属性完全函数依赖于候选键，取消了部分依赖  
3NF 在2NF上取消了非主属性对候选键的传递依赖，分解时将每个依赖单独分解成关系再相同主键合并  
**模式分解**  
无损连接分解与保持依赖分解 无损连接：对关系模式R上任意关系r均有r的分解的连接仍等于r 检验算法：构建表看是否存在依赖Ri与所有属性均相关  
保持依赖分解：函数依赖集合F在每个分解的关系模式Ri上的投影的并集逻辑蕴含F中的每个依赖  
关系模式设计：分解为小的关系模式减少了冗余与插删异常，但是连接计算效率低  
数据依赖-关系范式-模式分解  
##数据库物理存储  
计算机系统存储体系 内存（页）-磁盘（扇区/块，磁道，盘面）-磁带  
磁盘数据读写时间：寻道，旋转，传输 减少IO时间，减少寻道寻转时间-连续块存储，同一柱面或多个磁盘并行块存储  
减少读写时间，提高存储可靠性：RAID技术 并行读取多个磁盘，可靠性（奇偶检验与纠错）  
数据存储结构映射：查询操作算法-文件/索引管理（数据逻辑结构）-内存缓冲区管理-磁盘管理读写块  
**数据库索引**  
索引项：索引字段+行指针 索引文件 主文件  
主文件组织方式：堆文件，排序文件，散列文件，聚簇文件 索引文件组织方式：排序，索引  
索引性能好坏：访问时间，插入时间，删除时间，空间负载，支持存取有效性  
稀疏索引：主文件排序存储，空间小，查询慢 索引项指向存储块的指针：主索引  
稠密索引：候选键属性 非候选键（索引字段不重复使主文件排序或引入指针桶）  
